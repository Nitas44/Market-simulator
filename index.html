<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Market Simulator PRO</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<style>
body{margin:0;background:#0b0b0b;color:white;font-family:Arial;text-align:center}
header{padding:8px;font-size:22px;font-weight:bold}
.price{font-size:34px}
.percent{font-size:16px;margin-bottom:6px}
.small{font-size:14px;opacity:.85}
button, select{margin:4px;padding:6px 14px;font-size:15px}
.chart-box{height:65vh;padding:10px}
</style>
</head>
<body>

<header>ðŸ“ˆ Multi Stock Simulator</header>

<select id="stockSelector" onchange="changeStock()">
  <option value="Tech">Tech Corp</option>
  <option value="Energy">Energy Inc</option>
  <option value="Crypto">Crypto Coin</option>
</select>

<div class="price" id="price">$10.00</div>
<div class="percent" id="percent">â–² 0.00%</div>
<div class="small">
Balance: $<span id="balance">100.00</span> |
Shares: <span id="shares">0</span>
</div>

<div>
<button onclick="buy()">Buy</button>
<button onclick="sell()">Sell</button>
<button onclick="pause()">Pause</button>
<button onclick="resetGame()">New Game</button>
</div>

<div class="chart-box">
<canvas id="chart"></canvas>
</div>

<script>
const points = 40;
let balance = 100;
let shares = 0;
let paused = false;
let currentStock = "Tech";

let stocks = {
  Tech: { price: 10, data: Array(points).fill(10) },
  Energy: { price: 15, data: Array(points).fill(15) },
  Crypto: { price: 5, data: Array(points).fill(5) }
};

let chart;

function initChart(){
  chart = new Chart(document.getElementById('chart'),{
    type:'line',
    data:{
      labels:Array(points).fill(''),
      datasets:[{
        data:stocks[currentStock].data,
        borderColor:'#00ff6a',
        borderWidth:3,
        pointRadius:0,
        tension:.3
      }]
    },
    options:{
      animation:false,
      responsive:true,
      maintainAspectRatio:false,
      plugins:{legend:{display:false}},
      scales:{
        x:{display:false},
        y:{
          ticks:{
            color:'white',
            stepSize:0.5,
            callback:v=>'$'+v.toFixed(2)
          }
        }
      }
    }
  });
}

function changeStock(){
  currentStock = document.getElementById("stockSelector").value;
  chart.data.datasets[0].data = stocks[currentStock].data;
  updateUI();
  chart.update();
}

function startMarket(){
  setInterval(()=>{
    if(paused) return;

    for(let key in stocks){
      let direction = Math.random() < 0.5 ? -1 : 1;
      stocks[key].price += 0.50 * direction;

      if(stocks[key].price < 1) stocks[key].price = 1;
      stocks[key].price = parseFloat(stocks[key].price.toFixed(2));

      stocks[key].data.push(stocks[key].price);
      stocks[key].data.shift();
    }

    updateUI();
    chart.update();

  }, 2300);
}

function buy(){
  let price = stocks[currentStock].price;
  if(balance >= price){
    balance -= price;
    shares++;
    updateUI();
  }
}

function sell(){
  let price = stocks[currentStock].price;
  if(shares > 0){
    balance += price;
    shares--;
    updateUI();
  }
}

function pause(){
  paused = !paused;
}

function resetGame(){
  balance = 100;
  shares = 0;
  updateUI();
}

function updateUI(){
  let price = stocks[currentStock].price;
  document.getElementById('price').textContent = '$'+price.toFixed(2);
  document.getElementById('balance').textContent = balance.toFixed(2);
  document.getElementById('shares').textContent = shares;
}

initChart();
startMarket();
updateUI();
</script>

</body>
</html>
