<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Market Simulator</title>
<link rel="icon" href="favicon.ico" type="image/x-icon">
<style>
  body { font-family: Arial; background: #f0f0f0; display:flex; flex-direction:column; align-items:center; padding:20px;}
  canvas { background:#fff; border:1px solid #ccc; margin-bottom:10px;}
  #info { font-size:14px; margin-bottom:10px;}
  button { padding:5px 10px; margin:2px;}
</style>
</head>
<body>

<h2>Market Simulator</h2>
<div id="info">
  <span>ðŸ’µ Dinero: $<span id="money">1000</span></span>
</div>

<canvas id="chart" width="600" height="300"></canvas>

<div>
  <button id="buy">Buy</button>
  <button id="sell">Sell</button>
  <button id="reset">Reset</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
let money = 1000;
let shares = 0;
let stockPrice = 10;
let labels = [];
let data = [];
let buyPoints = [];
let sellPoints = [];
const ctx = document.getElementById('chart').getContext('2d');

const chart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: labels,
        datasets: [{
            label: 'Stock Price',
            data: data,
            borderColor: 'green',
            borderWidth: 2,
            pointRadius: 0,
            fill: false
        },{
            label: 'Buy Points',
            data: buyPoints,
            borderColor: 'blue',
            backgroundColor: 'blue',
            type: 'scatter',
            showLine: false,
            pointRadius: 5
        },{
            label: 'Sell Points',
            data: sellPoints,
            borderColor: 'orange',
            backgroundColor: 'orange',
            type: 'scatter',
            showLine: false,
            pointRadius: 5
        }]
    },
    options: {
        animation:false,
        responsive:false,
        scales: {
            y: { beginAtZero:false },
        }
    }
});

// FunciÃ³n para actualizar el chart
function updateChart() {
    const step = 0.5; // Paso grande en dÃ³lares
    const direction = Math.random() < 0.5 ? -1 : 1; // Sube o baja
    stockPrice = Math.max(1, stockPrice + step * direction);

    labels.push('');
    data.push(stockPrice);

    if(labels.length > 100) { 
        labels.shift(); 
        data.shift(); 
        buyPoints.shift(); 
        sellPoints.shift(); 
    }

    chart.update();
}

// Comprar
function buy() {
    if(money >= stockPrice) {
        shares++;
        money -= stockPrice;
        buyPoints.push({x: labels.length-1, y: stockPrice});
        document.getElementById('money').innerText = money.toFixed(2);
    }
}

// Vender
function sell() {
    if(shares > 0) {
        shares--;
        money += stockPrice;
        sellPoints.push({x: labels.length-1, y: stockPrice});
        document.getElementById('money').innerText = money.toFixed(2);
    }
}

// Reset
function resetGame() {
    money = 1000;
    shares = 0;
    stockPrice = 10;
    labels.length = 0;
    data.length = 0;
    buyPoints.length = 0;
    sellPoints.length = 0;
    document.getElementById('money').innerText = money.toFixed(2);
    chart.update();
}

document.getElementById('buy').addEventListener('click', buy);
document.getElementById('sell').addEventListener('click', sell);
document.getElementById('reset').addEventListener('click', resetGame);

// Cambiar cada 1.7 segundos
setInterval(updateChart, 2300);
</script>

</body>
</html>
